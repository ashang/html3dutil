<meta charset=utf-8>
<head>
<script type="text/javascript" src="../glutil_min.js"></script>
<script type="text/javascript" src="../frame.js"></script>
</head>
<body>
<canvas width="600" height="450" id=canvas></canvas>
<p>Texture courtesy of pdtextures.blogspot.com</p>
<script id="demo">
//<!--
/*
Written by Peter O. in 2015.

Any copyright is dedicated to the Public Domain.
http://creativecommons.org/publicdomain/zero/1.0/
If you like this, you should donate to Peter O.
at: http://upokecenter.dreamhosters.com/articles/donate-now-2/
*/
var Timer=function(){
 this.time=null
 this.hasPerformance=("performance" in window)
}
Timer.prototype.getTimeMod=function(mod){
 var t=(this.hasPerformance) ?
   window.performance.now() : (new Date().getTime()*1000);
 if(this.time==null) {
  this.time=t
  return 0
 } else {
  return (t-this.time)%mod
 }
}

  // Create the 3D scene; find the HTML canvas and pass it
  // to Scene3D.
  var scene=new Scene3D(document.getElementById("canvas"));
  var fc=new FrameCounterDiv(scene)
  scene.setPerspective(45,scene.getAspect(),0.1,100);
  scene.setLookAt([0,0,40]);
  var timer=new Timer()
  scene.loadAndMapTexture("461223191.jpg").then(function(tex){
   var mesh=Meshes.createBox(10,20,20);
   var shape=scene.makeShape(mesh).setTexture(tex)
   scene.addShape(shape);
   var rotation=[0,0,0];
   GLUtil.renderLoop(function(){
    fc.update();
    rotation[0]=timer.getTimeMod(12000)*360/12000;
    rotation[1]=timer.getTimeMod(6000)*360/6000;
    var q=GLMath.quatFromTaitBryan(rotation);
    shape.setQuaternion(q);
    scene.render();
   });
 })
//-->
</script>
<script>
window.addEventListener("load",function(){
 var e=document.createElement("pre")
 e.innerHTML=document.getElementById("demo").textContent.replace(/</g,"&lt;")
 document.body.appendChild(e)
})
</script>
</body>
