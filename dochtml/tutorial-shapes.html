<!DOCTYPE html><html><head><meta charset=utf-8><title>Creating Shapes</title></head><body><h1> Creating Shapes</h1><p><a href='index.html'>Back to documentation index.</a></p><p><a id=Introduction></a></p>
<h2>Introduction</h2><p>This page explains how my <a href="http://peteroupc.github.io/html3dutil"><strong>HTML 3D Library</strong></a>
supports 3D shapes and how to use the library to create shapes, both built-in and custom
shapes.</p>
<p><strong>Download the latest version of the HTML 3D Library at the [</strong>library's Releases page<strong>](https://github.com/peteroupc/html3dutil/releases).</strong> As of version 1.2.1, it includes
the <em>shapes.html</em> and <em>platonic.html</em> demos mentioned in this page.</p>
<p>This page will discuss:</p>
<ul>
<li>Using the Meshes methods to make built-in shapes</li>
<li>Making your own shapes with the <code>H3DU.Mesh</code> constructor</li>
<li>Building up your own shapes using the vertex methods of <code>H3DU.Mesh</code></li>
<li>Binding mesh buffers to shapes</li>
<li>Shape groups, or combinations of several shapes</li>
</ul>
<p><a id=Contents></a></p>
<h2>Contents</h2><ul>
<li><a href="#Introduction"><strong>Introduction</strong></a></li>
<li><a href="#Contents"><strong>Contents</strong></a></li>
<li><a href="#Creating_Shapes"><strong>Creating Shapes</strong></a><ul>
<li><a href="#Built_In_Shapes"><strong>Built-In Shapes</strong></a></li>
<li><a href="#Custom_Shapes"><strong>Custom Shapes</strong></a></li>
<li><a href="#The_Mesh_Constructor"><strong>The Mesh Constructor</strong></a></li>
<li><a href="#Vertex_Methods"><strong>Vertex Methods</strong></a></li>
</ul>
</li>
<li><a href="#Binding_Shapes"><strong>Binding Shapes</strong></a></li>
<li><a href="#Shape_Groups"><strong>Shape Groups</strong></a></li>
<li><a href="#Other_Pages"><strong>Other Pages</strong></a></li>
</ul>
<p><a id=Creating_Shapes></a></p>
<h2>Creating Shapes</h2><p>The HTML 3D library contains several methods for creating 3D shapes such
as cubes, cylinders, spheres, and custom shapes.</p>
<p><img src="shapes.png" alt="**An assortment of shapes: a red box, a blue sphere, a bright green 2D ring, and an
orange partial ring on the first row; and a yellow 3D ring, a brown cylinder, a dark
green square, and a purple cone on the second row.**"></p>
<p><a id=Built_In_Shapes></a></p>
<h3>Built-In Shapes</h3><p>The <a href="H3DU.Meshes.html"><code>H3DU.Meshes</code></a> class includes several handy methods for creating built-in shapes.
All methods described below return a <code>H3DU.MeshBuffer</code> object that describes the triangles they
are composed of.  See &quot;Custom Shapes&quot; below for more on meshes.</p>
<p><strong>3D Figures:</strong></p>
<ul>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createBox">Meshes.createBox()</a> - Creates a cube or box.</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createCylinder">Meshes.createCylinder()</a> - Creates a cylinder or cone, not including the base
or top.</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createClosedCylinder">Meshes.createClosedCylinder()</a> - Creates a cylinder or cone, including the base or top.</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createTorus">Meshes.createTorus()</a> - Creates a torus (doughnut shape).</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createSphere">Meshes.createSphere()</a> - Creates a sphere.</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createCapsule">Meshes.createCapsule()</a> - Creates a capsule shape.</li>
</ul>
<p><strong>2D Figures:</strong></p>
<ul>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createDisk">Meshes.createDisk()</a> - Creates a circular disk or a regular polygon, possibly
with a hole in the middle.</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createPartialDisk">Meshes.createPartialDisk()</a> - Creates a portion of a circular disk, possibly
with a hole where the middle of the complete disk would be.</li>
<li><a href="H3DU.Meshes.html#H3DU.Meshes.createPlane">Meshes.createPlane()</a> - Creates a rectangle.</li>
</ul>
<p><a id=Custom_Shapes></a></p>
<h3>Custom Shapes</h3><p>Also included is a <code>H3DU.Mesh</code> class for defining shapes not given among the built-in ones.
Shapes can consist of triangles, lines, or points.</p>
<p>There are two ways for specifying shapes: through the Mesh constructor, or through
methods that specify the mesh's data vertex by vertex.</p>
<p><a id=The_Mesh_Constructor></a></p>
<h3>The Mesh Constructor</h3><p>The <code>MeshBuffer</code> class contains four methods (<code>fromPositions</code>,
<code>fromPositionsNormals</code>, <code>fromPositionsUV</code>, and <code>fromPositionsNormalsUV</code>) that let you define a mesh buffer from a predefined array of vertex data.  See the documentation for those methods for more information.</p>
<p><a id=Vertex_Methods></a></p>
<h3>Vertex Methods</h3><p>Alternatively, or in addition, to the method described above,
you can specify the mesh's shape by calling methods that give each vertex's position and parameters:</p>
<ol>
<li><p>Call the <code>mode()</code> method and choose a primitive mode, such as <code>H3DU.Mesh.TRIANGLES</code>
or <code>H3DU.Mesh.QUAD_STRIP</code>:</p>
<pre class="prettyprint source"><code> mesh.mode(H3DU.Mesh.TRIANGLES);</code></pre><p> The mesh will build up the shape from the vertices you give it depending on the mesh's
primitive mode. For example, <code>QUAD_STRIP</code> defines a strip of connecting quadrilaterals,
and <code>TRIANGLES</code> defines a set of triangles that are not necessarily connected:</p>
<ul>
<li><code>H3DU.Mesh.TRIANGLES</code> - Set of triangles, 3 vertices each.</li>
<li><code>H3DU.Mesh.LINES</code> - Set of line segments, 2 vertices each.</li>
<li><code>H3DU.Mesh.QUADS</code> - Set of quadrilaterals, 4 vertices each.</li>
<li><code>H3DU.Mesh.TRIANGLE_STRIP</code> - A triangle strip. The first 3
vertices make up the first triangle, and each additional
triangle is made up of the last 2 vertices and 1
new vertex.</li>
<li><code>H3DU.Mesh.TRIANGLE_FAN</code> - A triangle fan. The first 3
vertices make up the first triangle, and each additional
triangle is made up of the last vertex, the first vertex of
the first trangle, and 1 new vertex.</li>
<li><code>H3DU.Mesh.QUAD_STRIP</code> - A strip of quadrilaterals (quads).
The first 4 vertices make up the first quad, and each additional
quad is made up of the last 2 vertices of the previous quad and
2 new vertices.</li>
<li><code>H3DU.Mesh.LINE_STRIP</code> - A series of points making up a connected line segment path.</li>
</ul>
</li>
<li><p>Call the <code>normal3()</code>, <code>color3()</code>, and <code>texCoord2()</code> methods, as needed, to set the
next vertex's parameters. You don't need to do this for each vertex if multiple
consecutive vertices will share the same normal, color, or texture coordinates.</p>
<pre class="prettyprint source"><code> mesh.normal3(2, 3, 4); // Set the x, y, and z of the normal.
 mesh.color3(0.1,0.6,1); // Set the red, green, and blue of the color.
 mesh.color3(&quot;red&quot;); // Set a CSS color.
 mesh.color3(&quot;#123FE8&quot;); // Set an HTML color.
 mesh.texCoord3(0.5,0.5); // Set the texture coordinates.</code></pre></li>
<li><p>Call the <code>vertex3()</code> method to add a new vertex and set its position. The vertex will
have the last normal, color, and texture coordinates defined on the mesh, if any
were given:</p>
<pre class="prettyprint source"><code> mesh.vertex3(x, y, z);</code></pre></li>
</ol>
<p>You can also call the <code>mode()</code> method any time to change the primitive mode, even to
the same mode. What this does is reset the state of the primitive so that future vertices
won't depend on previous vertices. For example, if you define a <code>TRIANGLE_FAN</code>, and
you call <code>mesh.mode(H3DU.Mesh.TRIANGLE_FAN)</code>, the newly defined <code>TRIANGLE_FAN</code> will be
&quot;disconnected&quot; from the previous one as far as the mesh object is concerned. However,
a single <code>Mesh</code> can contain only one kind of primitive (triangles, lines, or points) at a time.</p>
<p><a id=Binding_Shapes></a></p>
<h2>Binding Shapes</h2><p>Once you have a mesh of a 3D shape, you still need to attach it to a shape
and a batch of shapes in order for the renderer to draw it. This is where
the <a href="H3DU.Shape.html"><code>H3DU.Shape</code></a> class comes into
play; this class associates a 3D mesh with its location in the scene,
as well as its color, its appearance, and how its vertices will be transformed.
To attach a mesh to a 3D scene:</p>
<ol>
<li><p>Create a <code>Shape</code> object by passing the mesh buffer to the <code>H3DU.Shape</code> constructor:</p>
<pre class="prettyprint source"><code> var shape = new H3DU.Shape(meshBuffer);</code></pre></li>
<li><p>You may also set the <code>Shape</code>'s color, appearance, and position, using the examples below:</p>
<p> Examples for setting appearance:</p>
<pre class="prettyprint source"><code> shape.setColor(&quot;red&quot;); // set the color to a CSS color
 shape.setColor(&quot;#338845&quot;); // set the color to an HTML color
 shape.setColor(0.2,0.5,1); // set the color to its RGB values, each from 0 to 1
 // set material parameters (NOTE: if the mesh defines its own colors they
 // will override diffuse reflection given below)
 shape.setMaterial(new H3DU.Material({</code></pre><p>  &quot;ambient&quot;:&quot;blue&quot;,
  &quot;diffuse&quot;:&quot;blue&quot;,
  &quot;specular&quot;:&quot;white&quot;,
  &quot;shininess&quot;:30}));</p>
<pre class="prettyprint source"><code> // set material parameters: ambient, diffuse,
 // specular, shininess, emission
 shape.setMaterial(new H3DU.Material({</code></pre><p>  &quot;ambient&quot;:&quot;lime&quot;,
  &quot;diffuse&quot;:&quot;lime&quot;,
  &quot;specular&quot;:&quot;white&quot;,
  &quot;emission&quot;:[0.2,0.2,0.2],
  &quot;shininess&quot;:30}));</p>
<pre class="prettyprint source"><code> // set a texture; this requires the mesh to have texture
 // coordinates assigned to each vertex
 shape.setTexture(&quot;texture.png&quot;);</code></pre><p> Examples for setting position and transformation:</p>
<pre class="prettyprint source"><code> // move the shape 2 units along X axis, 4 units along Y axis,
 // and 5 units along Z axis
 shape.setPosition(2,4,5);
 // same, but passing an array
 shape.setPosition([2,4,5]);
 // rotate the shape 40 units about X axis, 20 units about Y axis,
 // and 50 units about Z axis
 shape.setQuaternion(H3DU.MathUtil.quatFromTaitBryan(40,20,50));
 // rotate the shape 20 units about Y axis
 shape.setQuaternion(H3DU.MathUtil.quatFromAxisAngle(20,0,1,0));
 // scale the shape by 2x in all axes
 shape.setScale(2,2,2);
 // same, but passing an array
 shape.setScale([2,2,2]);</code></pre><p> Note that <code>setPosition</code>, <code>setQuaternion</code>, and <code>setScale</code> don't change
the vertices of the underlying mesh the shape uses, but rather set up
a <a href="tutorial-glmath.html"><em>transformation matrix</em></a> that adjusts each vertex
in the shape &quot;on the fly&quot; when it comes time to draw it each frame.</p>
<p> If <code>setMatrix</code> wasn't called, then when the shape is rendered, it will generate
a transformation matrix that has the effect of scaling, then rotating,
then translating (shifting) the shape in 3D space.</p>
</li>
<li><p>Add the shape to a 3D batch (`H3DU.Batch3D):</p>
<pre class="prettyprint source"><code> batch3d.addShape(shape);</code></pre><p> Now, the next time <code>scene3d.render(batch)</code> is called, the <code>H3DU.Scene3D</code> will render the
given shape to the scene through the 3D batch.</p>
</li>
</ol>
<p><a id=Shape_Groups></a></p>
<h2>Shape Groups</h2><p>The <code>H3DU.ShapeGroup</code> class represents a shape that's a combination of multiple shapes. Usually,
they form different pieces of a combined shape that can be positioned, rotated, and scaled
at once. Here is an example of a clock made up of multiple shapes:</p>
<p><img src="clock.png" alt="**Clock**"></p>
<p>This clock is made up of shapes, which
are added to a single ShapeGroup which represents the whole clock, as follows:</p>
<ul>
<li>Clock: <code>ShapeGroup</code><ul>
<li>Edge: Torus</li>
<li>Front face: Disk</li>
<li>Back face: Disk</li>
<li>Hour hand: Capsule</li>
<li>Minute hand: Capsule</li>
<li>Seconds hand: Capsule</li>
<li>12 o'clock: Sphere</li>
<li>Center: Sphere</li>
</ul>
</li>
</ul>
<p>To create a shape group, call <code>new H3DU.ShapeGroup()</code>. To add a <code>Shape</code> object to the group,
call <code>new H3DU.Shape(shape)</code>. Note that you can add only shapes or other shape groups, not meshes,
to a shape group.</p>
<p><a id=Other_Pages></a></p>
<h2>Other Pages</h2><p>The following pages of mine on CodeProject also discuss this library:</p>
<ul>
<li><a href="http://www.codeproject.com/Tips/896839/Public-Domain-HTML-ThreeD-Library"><strong><em>Public-Domain HTML 3D Library</em></strong></a></li>
<li><a href="http://www.codeproject.com/Tips/990798/Drawing-Parametric-Surfaces-Using-the-Public-Domai"><strong><em>Drawing parametric surfaces using the Public Domain HTML 3D Library</em></strong></a></li>
<li><a href="http://www.codeproject.com/Tips/989978/The-Camera-and-the-Projection-and-View-Transforms"><strong><em>The &quot;Camera&quot; and the Projection and View Transforms</em></strong></a></li>
</ul><p><a href='index.html'>Back to documentation index.</a></p></body></html>
